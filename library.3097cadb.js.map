{"mappings":"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","sources":["src/js/dom/my_library.js","src/authFirebase/auth.js","src/authFirebase/app.js","src/authFirebase/open-close-modal.js"],"sourcesContent":["import { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\nimport { renderCollection } from './create-movie-markup';\n\nrefs.watchedButton.addEventListener('click', handleClickWatched);\nrefs.queueButton.addEventListener('click', handleClickQueue);\n\nrenderSavedFilms('watch');\n\nfunction handleClickQueue() {\n  renderSavedFilms('queue');\n  removeDisabled(refs.watchedButton);\n  setDisabled(refs.queueButton);\n  refs.isWatchTabActive = false;\n}\n\nfunction handleClickWatched() {\n  renderSavedFilms('watch');\n  setDisabled(refs.watchedButton);\n  removeDisabled(refs.queueButton);\n  refs.isWatchTabActive = true;\n}\n\nfunction renderSavedFilms(name) {\n  clearFilmList();\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    renderCollection(addedFilms);\n    refs.noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    refs.noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\nfunction setDisabled(el) {\n  el.setAttribute('disabled', '');\n  el.classList.add('button-active');\n}\nfunction removeDisabled(el) {\n  el.removeAttribute('disabled');\n  el.classList.remove('button-active');\n}\nfunction clearFilmList() {\n  refs.cardsContainer.innerHTML = '';\n}\n","export function authWithEmailAndPassword(email, password) {\n  const apiKey = `AIzaSyCHg4J_qzob1qjMAXidJJyR0ERxgFjrLiU`;\n  return fetch(\n    `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`,\n    {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password,\n        returnSecureToken: true,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }\n  )\n    .then(r => {\n      if (r.ok) {\n        return alert('Enjoy watching movies. Grab more popcorn and snacks.');\n      } else {\n        throw new Error(`Email or Password is wrong`);\n      }\n    })\n    .catch(e => alert(e));\n}\n\nexport function logInUserWithEmail(email, password) {\n  const apiKey = `AIzaSyCHg4J_qzob1qjMAXidJJyR0ERxgFjrLiU`;\n  return fetch(\n    `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apiKey}`,\n    {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password,\n        returnSecureToken: true,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }\n  )\n    .then(r => {\n      if (r.ok) {\n        return alert('Enjoy watching movies. Grab more popcorn and snacks.');\n      } else {\n        throw new Error(`Email or Password is wrong`);\n      }\n    })\n    .catch(e => alert(e));\n}","import { authWithEmailAndPassword, logInUserWithEmail } from './auth'\n\n\nconst authModalOpenBtn = document.getElementById('auth-open-modal');\n\n\nauthModalOpenBtn.addEventListener('click', openModal)\n\nfunction getAuthForm() {\n    return `\n         <button class=\"modal-close__btn js-modal-close\" data-close-modal__window>\n                <svg width=\"20\" height=\"20\" class=\"swiper__icon\">\n                    <use href=\"../images/sprite.svg#icon-close\"></use>\n                </svg>\n            </button>\n            <form class=\"auth-modal\" id=\"auth-form\">\n                <div class=\"input-area-email\">\n                    <label for=\"email\" class=\"label-email\">E-mail</label>\n                    <input type=\"text\" id=\"email\">\n                </div>\n                <div class=\"input-area-password\">\n                    <label for=\"password\">Password</label>\n                    <input type=\"text\" id=\"password\">\n                </div>\n                <button class=\"button button-auth-modal-btn\" type=\"submit\">\n                    Sign in\n                </button>\n            </form>\n    `\n}\n\nfunction createModal(title, content) {\n    const modal = document.getElementById('auth-modal');\n    modal.innerHTML = `\n    <h2 class=\"auth-title\">${title}</h2>\n    ${content}\n            \n    `\n}\n\nfunction authFormHandler(event) {\n    event.preventDefault()\n\n    const email = event.target.querySelector('#email').value\n    const password = event.target.querySelector('#password').value\n\n    authWithEmailAndPassword(email, password)\n}\n\nfunction openModal() {\n    createModal('Sign in to your account', getAuthForm())\n    document\n        .getElementById('auth-modal')\n        .addEventListener('submit', authFormHandler)\n    \n}\n\nconst logInBtn = document.getElementById('log-open-modal')\n\nlogInBtn.addEventListener('click', openLogInModal)\n\nfunction getLogInForm() {\n     return `\n         <button class=\"modal-close__btn js-modal-close\" data-close-modal__window>\n                <svg width=\"20\" height=\"20\" class=\"swiper__icon\">\n                    <use href=\"../images/sprite.svg#icon-close\"></use>\n                </svg>\n            </button>\n            <form class=\"auth-modal\" id=\"auth-form\">\n                <div class=\"input-area-email\">\n                    <label for=\"email\" class=\"label-email\">E-mail</label>\n                    <input type=\"text\" id=\"email\">\n                </div>\n                <div class=\"input-area-password\">\n                    <label for=\"password\">Password</label>\n                    <input type=\"text\" id=\"password\">\n                </div>\n                <button class=\"button button-auth-modal-btn\" type=\"submit\">\n                    Log in\n                </button>\n            </form>\n    `\n}\n\nfunction openLogInModal(event) {\n    console.log(event);\n    createLogInModal('Log in your account', getLogInForm())\n    document\n        .getElementById('login-modal')\n        .addEventListener('submit', logInFormHandler)\n    \n}\n\nfunction createLogInModal(title, content) {\n    console.log(content);\n    const modal = document.getElementById('login-modal');\n    modal.innerHTML = `\n    <h2 class=\"auth-title\">${title}</h2>\n    ${content}\n            \n    `\n}\n\n\nfunction logInFormHandler(event) {\n    event.preventDefault()\n\n    const email = event.target.querySelector('#email').value\n    const password = event.target.querySelector('#password').value\n\n    logInUserWithEmail(email, password)\n}\n","!function(e){\"function\"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,o=(t.document||t.ownerDocument).querySelectorAll(e),n=0;o[n]&&o[n]!==t;)++n;return Boolean(o[n])}),\"function\"!=typeof e.closest&&(e.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}(window.Element.prototype);\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n   /* Записываем в переменные массив элементов-кнопок и подложку.\n      Подложке зададим id, чтобы не влиять на другие элементы с классом overlay*/\n   var modalButtons = document.querySelectorAll('.js-open-modal'),\n       overlay      = document.querySelector('.js-overlay-modal'),\n       closeButtons = document.querySelectorAll('.js-modal-close');\n\n\n   /* Перебираем массив кнопок */\n   modalButtons.forEach(function(item){\n\n      /* Назначаем каждой кнопке обработчик клика */\n      item.addEventListener('click', function(e) {\n\n         /* Предотвращаем стандартное действие элемента. Так как кнопку разные\n            люди могут сделать по-разному. Кто-то сделает ссылку, кто-то кнопку.\n            Нужно подстраховаться. */\n         e.preventDefault();\n\n         /* При каждом клике на кнопку мы будем забирать содержимое атрибута data-modal\n            и будем искать модальное окно с таким же атрибутом. */\n         var modalId = this.getAttribute('data-modal'),\n             modalElem = document.querySelector('.modal[data-modal=\"' + modalId + '\"]');\n\n\n         /* После того как нашли нужное модальное окно, добавим классы\n            подложке и окну чтобы показать их. */\n         modalElem.classList.add('active');\n         overlay.classList.add('active');\n      }); // end click\n\n   }); // end foreach\n\n\n   closeButtons.forEach(function(item){\n\n      item.addEventListener('click', function(e) {\n         var parentModal = this.closest('.modal');\n\n         parentModal.classList.remove('active');\n         overlay.classList.remove('active');\n      });\n\n   }); // end foreach\n\n\n    document.body.addEventListener('keyup', function (e) {\n        var key = e.keyCode;\n\n        if (key == 27) {\n\n            document.querySelector('.modal.active').classList.remove('active');\n            document.querySelector('.overlay').classList.remove('active');\n        };\n    }, false);\n\n\n    overlay.addEventListener('click', function() {\n        document.querySelector('.modal.active').classList.remove('active');\n        this.classList.remove('active');\n    });\n\n\n\n\n}); // end ready"],"names":["$37uNk","parcelRequire","$e5f0ec2bf84d8f14$var$renderSavedFilms","name","refs","cardsContainer","innerHTML","addedFilms","$cXfU0","getFromStorage","length","$kbfff","renderCollection","noFilmsMessage","classList","add","remove","$e5f0ec2bf84d8f14$var$setDisabled","el","setAttribute","$e5f0ec2bf84d8f14$var$removeDisabled","removeAttribute","$44ea7647d1535928$export$76e65f8f7f8854df","email","password","fetch","method","body","JSON","stringify","returnSecureToken","headers","then","r","ok","alert","Error","catch","e","$44ea7647d1535928$export$957f485991839abb","watchedButton","addEventListener","queueButton","isWatchTabActive","$e8f7c873d25daa82$var$authFormHandler","event","preventDefault","target","querySelector","value","document","getElementById","title","content","$e8f7c873d25daa82$var$logInFormHandler","e1","console","log","$e8f7c873d25daa82$var$createLogInModal","window","Element","prototype","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","t","this","o","ownerDocument","querySelectorAll","n","Boolean","closest","nodeType","parentNode","overlay","closeButtons","modalButtons","forEach","item","modalId","keyCode"],"version":3,"file":"library.3097cadb.js.map"}