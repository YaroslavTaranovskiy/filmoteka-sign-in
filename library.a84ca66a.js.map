{"mappings":"2hBAAA,IAAAA,EAAAC,EAAA,S,0BAuBA,SAASC,EAAiBC,GAoBxBH,EAAAI,KAAKC,eAAeC,UAAY,GAlBhC,MAAMC,GAAa,EAAAC,EAAAC,gBAAeN,GAC9BI,GAAcA,EAAWG,OAAS,IACpC,EAAAC,EAAAC,kBAAiBL,GACjBP,EAAAI,KAAKS,eAAeC,UAAUC,IAAI,oBAElCf,EAAAI,KAAKS,eAAeC,UAAUE,OAAO,kB,CAIzC,SAASC,EAAYC,GACnBA,EAAGC,aAAa,WAAY,IAC5BD,EAAGJ,UAAUC,IAAI,gB,CAEnB,SAASK,EAAeF,GACtBA,EAAGG,gBAAgB,YACnBH,EAAGJ,UAAUE,OAAO,gB,CCxCf,SAASM,EAAyBC,EAAOC,GAE9C,OAAOC,MACL,oHACA,CACEC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,C,MACnBN,E,SACAC,EACAM,mBAAmB,IAErBC,QAAS,CACP,eAAgB,sBAInBC,MAAKC,IACJ,GAAIA,EAAEC,GACJ,OAAOC,MAAM,wDAEb,MAAM,IAAIC,MAAM,6BAA6B,IAGhDC,OAAMC,GAAKH,MAAMG,I,CDnBtBtC,EAAAI,KAAKmC,cAAcC,iBAAiB,SAYpC,WACEtC,EAAiB,SACjBe,EAAYjB,EAAAI,KAAKmC,eACjBnB,EAAepB,EAAAI,KAAKqC,aACpBzC,EAAAI,KAAKsC,kBAAmB,C,IAf1B1C,EAAAI,KAAKqC,YAAYD,iBAAiB,SAIlC,WACEtC,EAAiB,SACjBkB,EAAepB,EAAAI,KAAKmC,eACpBtB,EAAYjB,EAAAI,KAAKqC,aACjBzC,EAAAI,KAAKsC,kBAAmB,C,IAN1BxC,EAAiB,S,4CEgCjB,SAASyC,EAAgBC,GACrBA,EAAMC,iBAKNvB,EAHcsB,EAAME,OAAOC,cAAc,UAAUC,MAClCJ,EAAME,OAAOC,cAAc,aAAaC,M,CAzCpCC,SAASC,eAAe,mBAGhCV,iBAAiB,SA2ClC,WAlBqBW,EAmBL,0BAnBYC,EAtBjB,61BAuBOH,SAASC,eAAe,cAChC5C,UAAY,gCACO6C,eACvBC,wBAgBFH,SACKC,eAAe,cACfV,iBAAiB,SAAUG,GAtBpC,IAAqBQ,EAAOC,C","sources":["src/js/dom/my_library.js","src/authFirebase/auth.js","src/authFirebase/app.js"],"sourcesContent":["import { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\nimport { renderCollection } from './create-movie-markup';\n\nrefs.watchedButton.addEventListener('click', handleClickWatched);\nrefs.queueButton.addEventListener('click', handleClickQueue);\n\nrenderSavedFilms('watch');\n\nfunction handleClickQueue() {\n  renderSavedFilms('queue');\n  removeDisabled(refs.watchedButton);\n  setDisabled(refs.queueButton);\n  refs.isWatchTabActive = false;\n}\n\nfunction handleClickWatched() {\n  renderSavedFilms('watch');\n  setDisabled(refs.watchedButton);\n  removeDisabled(refs.queueButton);\n  refs.isWatchTabActive = true;\n}\n\nfunction renderSavedFilms(name) {\n  clearFilmList();\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    renderCollection(addedFilms);\n    refs.noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    refs.noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\nfunction setDisabled(el) {\n  el.setAttribute('disabled', '');\n  el.classList.add('button-active');\n}\nfunction removeDisabled(el) {\n  el.removeAttribute('disabled');\n  el.classList.remove('button-active');\n}\nfunction clearFilmList() {\n  refs.cardsContainer.innerHTML = '';\n}\n","export function authWithEmailAndPassword(email, password) {\n  const apiKey = `AIzaSyCHg4J_qzob1qjMAXidJJyR0ERxgFjrLiU`;\n  return fetch(\n    `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`,\n    {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password,\n        returnSecureToken: true,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }\n  )\n    .then(r => {\n      if (r.ok) {\n        return alert('Enjoy watching movies. Grab more popcorn and snacks.');\n      } else {\n        throw new Error(`Email or Password is wrong`);\n      }\n    })\n    .catch(e => alert(e));\n}\n\n","import { authWithEmailAndPassword } from './auth'\n\nconst authModalOpenBtn = document.getElementById('auth-open-modal');\n\n\nauthModalOpenBtn.addEventListener('click', openModal)\n\nfunction getAuthForm() {\n    return `\n         <button class=\"modal-close__btn\" data-close-modal__window>\n                <svg width=\"20\" height=\"20\" class=\"swiper__icon\">\n                    <use href=\"../images/sprite.svg#icon-close\"></use>\n                </svg>\n            </button>\n            <form class=\"auth-modal\" id=\"auth-form\">\n                <div class=\"input-area-email\">\n                    <label for=\"email\" class=\"label-email\">E-mail</label>\n                    <input type=\"text\" id=\"email\">\n                </div>\n                <div class=\"input-area-password\">\n                    <label for=\"password\">Password</label>\n                    <input type=\"text\" id=\"password\">\n                </div>\n                <button class=\"button button-auth-modal-btn\" type=\"submit\">\n                    Sign in\n                </button>\n            </form>\n    `\n}\n\nfunction createModal(title, content) {\n    const modal = document.getElementById('auth-modal');\n    modal.innerHTML = `\n    <h2 class=\"auth-title\">${title}</h2>\n    ${content}\n            \n    `\n}\n\nfunction authFormHandler(event) {\n    event.preventDefault()\n\n    const email = event.target.querySelector('#email').value\n    const password = event.target.querySelector('#password').value\n\n    authWithEmailAndPassword(email, password)\n}\n\nfunction openModal() {\n    createModal('Sign in to your account', getAuthForm())\n    document\n        .getElementById('auth-modal')\n        .addEventListener('submit', authFormHandler)\n    \n}"],"names":["$37uNk","parcelRequire","$e5f0ec2bf84d8f14$var$renderSavedFilms","name","refs","cardsContainer","innerHTML","addedFilms","$cXfU0","getFromStorage","length","$kbfff","renderCollection","noFilmsMessage","classList","add","remove","$e5f0ec2bf84d8f14$var$setDisabled","el","setAttribute","$e5f0ec2bf84d8f14$var$removeDisabled","removeAttribute","$44ea7647d1535928$export$76e65f8f7f8854df","email","password","fetch","method","body","JSON","stringify","returnSecureToken","headers","then","r","ok","alert","Error","catch","e","watchedButton","addEventListener","queueButton","isWatchTabActive","$e8f7c873d25daa82$var$authFormHandler","event","preventDefault","target","querySelector","value","document","getElementById","title","content"],"version":3,"file":"library.a84ca66a.js.map"}