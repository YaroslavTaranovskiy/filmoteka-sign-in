{"mappings":"uiBAAA,ICAUA,EDAVC,EAAAC,EAAA,S,0BAuBA,SAASC,EAAiBC,GAoBxBH,EAAAI,KAAKC,eAAeC,UAAY,GAlBhC,IAAMC,GAAa,EAAAC,EAAAC,gBAAeN,GAC9BI,GAAcA,EAAWG,OAAS,IACpC,EAAAC,EAAAC,kBAAiBL,GACjBP,EAAAI,KAAKS,eAAeC,UAAUC,IAAI,oBAElCf,EAAAI,KAAKS,eAAeC,UAAUE,OAAO,kB,CAIzC,SAASC,EAAYC,GACnBA,EAAGC,aAAa,WAAY,IAC5BD,EAAGJ,UAAUC,IAAI,gB,CAEnB,SAASK,EAAeF,GACtBA,EAAGG,gBAAgB,YACnBH,EAAGJ,UAAUE,OAAO,gB,CExCf,SAASM,EAAyBC,EAAOC,GAE9C,OAAOC,MACL,6EAAoFC,OAFtE,2CAGd,CACEC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBP,QACAC,WACAO,mBAAmB,IAErBC,QAAS,CACP,eAAgB,sBAInBC,MAAK,SAAAC,GACJ,GAAIA,EAAEC,GACJ,OAAOC,MAAM,wDAEb,MAAM,IAAIC,MAAO,6B,IAGpBC,OAAM,SAAAC,G,OAAKH,MAAMG,E,IAGf,SAASC,EAAmBjB,EAAOC,GAExC,OAAOC,MACL,iEAAwEC,OAF1D,2CAGd,CACEC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBP,QACAC,WACAO,mBAAmB,IAErBC,QAAS,CACP,eAAgB,sBAInBC,MAAK,SAAAC,GACJ,GAAIA,EAAEC,GACJ,OAAOC,MAAM,wDAEb,MAAM,IAAIC,MAAO,6B,IAGpBC,OAAM,SAAAC,G,OAAKH,MAAMG,E,ICTtB,SAASE,EAAgBC,GACrBA,EAAMC,iBAKNrB,EAHcoB,EAAME,OAAOC,cAAc,UAAUC,MAClCJ,EAAME,OAAOC,cAAc,aAAaC,M,CA4D7D,SAASC,EAAiBL,GACtBA,EAAMC,iBAKNH,EAHcE,EAAME,OAAOC,cAAc,UAAUC,MAClCJ,EAAME,OAAOC,cAAc,aAAaC,M,CHxG7D9C,EAAAI,KAAK4C,cAAcC,iBAAiB,SAYpC,WACE/C,EAAiB,SACjBe,EAAYjB,EAAAI,KAAK4C,eACjB5B,EAAepB,EAAAI,KAAK8C,aACpBlD,EAAAI,KAAK+C,kBAAmB,C,IAf1BnD,EAAAI,KAAK8C,YAAYD,iBAAiB,SAIlC,WACE/C,EAAiB,SACjBkB,EAAepB,EAAAI,KAAK4C,eACpB/B,EAAYjB,EAAAI,KAAK8C,aACjBlD,EAAAI,KAAK+C,kBAAmB,C,IAN1BjD,EAAiB,S,4CGJQkD,SAASC,eAAe,mBAGhCJ,iBAAiB,SA2ClC,WAlBqBK,EAmBL,0BAnBYC,EAtBhB,42BAuBMH,SAASC,eAAe,cAChC/C,UAAY,gCAEhBoB,OADuB4B,EAAM,eACrB5B,OAAR6B,EAAQ,wBAgBVH,SACKC,eAAe,cACfJ,iBAAiB,SAAUR,GAtBpC,IAAqBa,EAAOC,C,IA0BXH,SAASC,eAAe,kBAEhCJ,iBAAiB,SAyB1B,SAAwBP,GACpBc,QAAQC,IAAIf,GAQUY,EAPL,sBAOYC,EA/BpB,22BAgCTC,QAAQC,IAAIF,GACEH,SAASC,eAAe,eAChC/C,UAAY,gCAEhBoB,OADuB4B,EAAM,eACrB5B,OAAR6B,EAAQ,wBAXVH,SACKC,eAAe,eACfJ,iBAAiB,SAAUF,GAIpC,IAA0BO,EAAOC,C,IF7FpB,mBAAHxD,EAA6X2D,OAAOC,QAAQC,WAApXC,UAAU9D,EAAE8D,QAAQ9D,EAAE+D,mBAAmB/D,EAAEgE,oBAAoBhE,EAAEiE,uBAAuB,SAASzB,GAAG,IAAI,IAAI0B,EAAEC,KAAKC,GAAGF,EAAEb,UAAUa,EAAEG,eAAeC,iBAAiB9B,GAAG+B,EAAE,EAAEH,EAAEG,IAAIH,EAAEG,KAAKL,KAAKK,EAAE,OAAOC,QAAQJ,EAAEG,G,GAAM,mBAAmBvE,EAAEyE,UAAUzE,EAAEyE,QAAQ,SAASjC,GAAG,IAAI,IAAI0B,EAAEC,KAAKD,GAAG,IAAIA,EAAEQ,UAAU,CAAC,GAAGR,EAAEJ,QAAQtB,GAAG,OAAO0B,EAAEA,EAAEA,EAAES,U,CAAW,OAAO,I,GAG/XtB,SAASH,iBAAiB,oBAAoB,W,kDAIvC0B,EAAevB,SAASP,cAAiB,qBACzC+B,EAAuBxB,SAACiB,iBAAc,mBAI1CQ,EAAAC,SAA8B,SACRC,GAEnBA,EAAA9B,iBAAA,kBACIV,G,yDASaa,SAAKP,cAAa,sBAChBmC,EAAS,M,wBAMML,EAAR7D,UAAVC,IAAJ,S,OAM4B6D,EAAbE,SAAR,SAATC,GAE2BA,EAAL9B,iBAAjB,SAAT,SAATV,GACmB2B,KAALM,QAAR,UAEmB1D,UAAVE,OAAP,UAC6B2D,EAAR7D,UAAVE,OAAP,S,OAM8BoC,SAATxB,KAALqB,iBAAjB,SAAT,SAAAV,GAGyB,IAFCA,EAAF0C,UAIQ7B,SAATP,cAAd,iBAAX/B,UAAUE,OAAO,UACiBoC,SAATP,cAAd,YAAZ/B,UAAME,OAAO,U,IAE2B,GAGG2D,EAAR1B,iBAAjB,SAAT,WAC8BG,SAATP,cAAd,iBAAjB/B,UAAQE,OAAO,UACyBkD,KAALpD,UAAVE,OAAP,S","sources":["src/js/dom/my_library.js","src/authFirebase/open-close-modal.js","src/authFirebase/auth.js","src/authFirebase/app.js"],"sourcesContent":["import { refs } from '../common/refs';\nimport { getFromStorage } from '../other/localeStorageServices';\nimport { renderCollection } from './create-movie-markup';\n\nrefs.watchedButton.addEventListener('click', handleClickWatched);\nrefs.queueButton.addEventListener('click', handleClickQueue);\n\nrenderSavedFilms('watch');\n\nfunction handleClickQueue() {\n  renderSavedFilms('queue');\n  removeDisabled(refs.watchedButton);\n  setDisabled(refs.queueButton);\n  refs.isWatchTabActive = false;\n}\n\nfunction handleClickWatched() {\n  renderSavedFilms('watch');\n  setDisabled(refs.watchedButton);\n  removeDisabled(refs.queueButton);\n  refs.isWatchTabActive = true;\n}\n\nfunction renderSavedFilms(name) {\n  clearFilmList();\n  const addedFilms = getFromStorage(name);\n  if (addedFilms && addedFilms.length > 0) {\n    renderCollection(addedFilms);\n    refs.noFilmsMessage.classList.add('visually-hidden');\n  } else {\n    refs.noFilmsMessage.classList.remove('visually-hidden');\n  }\n}\n\nfunction setDisabled(el) {\n  el.setAttribute('disabled', '');\n  el.classList.add('button-active');\n}\nfunction removeDisabled(el) {\n  el.removeAttribute('disabled');\n  el.classList.remove('button-active');\n}\nfunction clearFilmList() {\n  refs.cardsContainer.innerHTML = '';\n}\n","!function(e){\"function\"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,o=(t.document||t.ownerDocument).querySelectorAll(e),n=0;o[n]&&o[n]!==t;)++n;return Boolean(o[n])}),\"function\"!=typeof e.closest&&(e.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}(window.Element.prototype);\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n\n   /* Записываем в переменные массив элементов-кнопок и подложку.\n      Подложке зададим id, чтобы не влиять на другие элементы с классом overlay*/\n   var modalButtons = document.querySelectorAll('.js-open-modal'),\n       overlay      = document.querySelector('.js-overlay-modal'),\n       closeButtons = document.querySelectorAll('.js-modal-close');\n\n\n   /* Перебираем массив кнопок */\n   modalButtons.forEach(function(item){\n\n      /* Назначаем каждой кнопке обработчик клика */\n      item.addEventListener('click', function(e) {\n\n         /* Предотвращаем стандартное действие элемента. Так как кнопку разные\n            люди могут сделать по-разному. Кто-то сделает ссылку, кто-то кнопку.\n            Нужно подстраховаться. */\n         e.preventDefault();\n\n         /* При каждом клике на кнопку мы будем забирать содержимое атрибута data-modal\n            и будем искать модальное окно с таким же атрибутом. */\n         var modalId = this.getAttribute('data-modal'),\n             modalElem = document.querySelector('.modal[data-modal=\"' + modalId + '\"]');\n\n\n         /* После того как нашли нужное модальное окно, добавим классы\n            подложке и окну чтобы показать их. */\n         modalElem.classList.add('active');\n         overlay.classList.add('active');\n      }); // end click\n\n   }); // end foreach\n\n\n   closeButtons.forEach(function(item){\n\n      item.addEventListener('click', function(e) {\n         var parentModal = this.closest('.modal');\n\n         parentModal.classList.remove('active');\n         overlay.classList.remove('active');\n      });\n\n   }); // end foreach\n\n\n    document.body.addEventListener('keyup', function (e) {\n        var key = e.keyCode;\n\n        if (key == 27) {\n\n            document.querySelector('.modal.active').classList.remove('active');\n            document.querySelector('.overlay').classList.remove('active');\n        };\n    }, false);\n\n\n    overlay.addEventListener('click', function() {\n        document.querySelector('.modal.active').classList.remove('active');\n        this.classList.remove('active');\n    });\n\n\n\n\n}); // end ready","export function authWithEmailAndPassword(email, password) {\n  const apiKey = `AIzaSyCHg4J_qzob1qjMAXidJJyR0ERxgFjrLiU`;\n  return fetch(\n    `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`,\n    {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password,\n        returnSecureToken: true,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }\n  )\n    .then(r => {\n      if (r.ok) {\n        return alert('Enjoy watching movies. Grab more popcorn and snacks.');\n      } else {\n        throw new Error(`Email or Password is wrong`);\n      }\n    })\n    .catch(e => alert(e));\n}\n\nexport function logInUserWithEmail(email, password) {\n  const apiKey = `AIzaSyCHg4J_qzob1qjMAXidJJyR0ERxgFjrLiU`;\n  return fetch(\n    `https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${apiKey}`,\n    {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password,\n        returnSecureToken: true,\n      }),\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    }\n  )\n    .then(r => {\n      if (r.ok) {\n        return alert('Enjoy watching movies. Grab more popcorn and snacks.');\n      } else {\n        throw new Error(`Email or Password is wrong`);\n      }\n    })\n    .catch(e => alert(e));\n}","import { authWithEmailAndPassword, logInUserWithEmail } from './auth'\n\n\nconst authModalOpenBtn = document.getElementById('auth-open-modal');\n\n\nauthModalOpenBtn.addEventListener('click', openModal)\n\nfunction getAuthForm() {\n    return `\n         <button class=\"modal-close__btn js-modal-close\" data-close-modal__window>\n                <svg width=\"20\" height=\"20\" class=\"swiper__icon\">\n                    <use href=\"../images/sprite.svg#icon-close\"></use>\n                </svg>\n            </button>\n            <form class=\"auth-modal\" id=\"auth-form\">\n                <div class=\"input-area-email\">\n                    <label for=\"email\" class=\"label-email\">E-mail</label>\n                    <input type=\"text\" id=\"email\">\n                </div>\n                <div class=\"input-area-password\">\n                    <label for=\"password\">Password</label>\n                    <input type=\"text\" id=\"password\">\n                </div>\n                <button class=\"button button-auth-modal-btn\" type=\"submit\">\n                    Sign in\n                </button>\n            </form>\n    `\n}\n\nfunction createModal(title, content) {\n    const modal = document.getElementById('auth-modal');\n    modal.innerHTML = `\n    <h2 class=\"auth-title\">${title}</h2>\n    ${content}\n            \n    `\n}\n\nfunction authFormHandler(event) {\n    event.preventDefault()\n\n    const email = event.target.querySelector('#email').value\n    const password = event.target.querySelector('#password').value\n\n    authWithEmailAndPassword(email, password)\n}\n\nfunction openModal() {\n    createModal('Sign in to your account', getAuthForm())\n    document\n        .getElementById('auth-modal')\n        .addEventListener('submit', authFormHandler)\n    \n}\n\nconst logInBtn = document.getElementById('log-open-modal')\n\nlogInBtn.addEventListener('click', openLogInModal)\n\nfunction getLogInForm() {\n     return `\n         <button class=\"modal-close__btn js-modal-close\" data-close-modal__window>\n                <svg width=\"20\" height=\"20\" class=\"swiper__icon\">\n                    <use href=\"../images/sprite.svg#icon-close\"></use>\n                </svg>\n            </button>\n            <form class=\"auth-modal\" id=\"auth-form\">\n                <div class=\"input-area-email\">\n                    <label for=\"email\" class=\"label-email\">E-mail</label>\n                    <input type=\"text\" id=\"email\">\n                </div>\n                <div class=\"input-area-password\">\n                    <label for=\"password\">Password</label>\n                    <input type=\"text\" id=\"password\">\n                </div>\n                <button class=\"button button-auth-modal-btn\" type=\"submit\">\n                    Log in\n                </button>\n            </form>\n    `\n}\n\nfunction openLogInModal(event) {\n    console.log(event);\n    createLogInModal('Log in your account', getLogInForm())\n    document\n        .getElementById('login-modal')\n        .addEventListener('submit', logInFormHandler)\n    \n}\n\nfunction createLogInModal(title, content) {\n    console.log(content);\n    const modal = document.getElementById('login-modal');\n    modal.innerHTML = `\n    <h2 class=\"auth-title\">${title}</h2>\n    ${content}\n            \n    `\n}\n\n\nfunction logInFormHandler(event) {\n    event.preventDefault()\n\n    const email = event.target.querySelector('#email').value\n    const password = event.target.querySelector('#password').value\n\n    logInUserWithEmail(email, password)\n}\n"],"names":["e1","$ihtdk","parcelRequire","$9d816f78cf7ff948$var$renderSavedFilms","name","refs","cardsContainer","innerHTML","addedFilms","$kZ2no","getFromStorage","length","$duIyV","renderCollection","noFilmsMessage","classList","add","remove","$9d816f78cf7ff948$var$setDisabled","el","setAttribute","$9d816f78cf7ff948$var$removeDisabled","removeAttribute","$34a5c2fa6f285526$export$76e65f8f7f8854df","email","password","fetch","concat","method","body","JSON","stringify","returnSecureToken","headers","then","r","ok","alert","Error","catch","e","$34a5c2fa6f285526$export$957f485991839abb","$55a89eefe7a8710f$var$authFormHandler","event","preventDefault","target","querySelector","value","$55a89eefe7a8710f$var$logInFormHandler","watchedButton","addEventListener","queueButton","isWatchTabActive","document","getElementById","title","content","console","log","window","Element","prototype","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","t","this","o","ownerDocument","querySelectorAll","n","Boolean","closest","nodeType","parentNode","overlay","closeButtons","modalButtons","forEach","item","modalId","keyCode"],"version":3,"file":"library.326335df.js.map"}